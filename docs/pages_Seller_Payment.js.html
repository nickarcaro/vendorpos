<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: pages/Seller/Payment.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: pages/Seller/Payment.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import React, { useState, useContext, useEffect } from "react";
import { Row, Col, Divider } from "antd";
import { CreditCardFilled } from "@ant-design/icons";
import { DollarCircleFilled } from "@ant-design/icons";
import { BankFilled } from "@ant-design/icons";
import { List, Button } from "antd";
import { CartContext } from "../../context/CartContext";
import { LeftCircleTwoTone } from "@ant-design/icons";
import useAuth from "../../hooks/useAuth";
import { getMeApi } from "../../api/user";
import { useHistory } from "react-router-dom";

import ConfirmSale from "../../components/ConfirmSale";
import { getTotal, getPromotionDiscount } from '../../components/ListCart/ListCart'

/*style de padding solo afecta los gutterrow 2 y 3 */
const style = { padding: "31px 0" };
/*lo que ocurre con la seleccion de una casilla */
//const value = 0;

/**
 * Componente de ventana para seleccionar medio de pago
 */
const Payment = () => {
  const [suma, setsuma] = useState("");
  const [efectivo, setEfectivo] = useState(false);
  const [credito, setCredito] = useState(false);
  const [debito, setDebito] = useState(false);

  const [cart, setCart] = useContext(CartContext);

  const [user, setUser] = useState(undefined);
  const { auth, logout } = useAuth();
  const history = useHistory();
  useEffect(() => {
    (async () => {
      const response = await getMeApi(logout);
      setUser(response);
    })();
  }, [auth, setUser, logout]);
  if (user === undefined) return null;
  if (!auth &amp;&amp; !user) {
    history.replace("/");
    return null;
  }

  return (
    &lt;div>
      &lt;>
        &lt;Row gutter={100}>
          &lt;Col className="gutter-row" span={8}>
            &lt;Button
              icon={&lt;LeftCircleTwoTone />}
              type="primary"
              shape="round"
              size="Large"
              onClick={() => {
                history.push("/pos");
              }}
            >
              Volver
            &lt;/Button>
            &lt;Divider>Productos&lt;/Divider>
            &lt;List
              itemLayout="horizontal"
              footer={
                &lt;Row>
                  &lt;Col span={12}>
                    {
                      cart.promotionList.length > 0 ?
                      &lt;h4>Sub-Total&lt;/h4> :
                      &lt;h4>Total&lt;/h4>
                    }
                  &lt;/Col>
                  &lt;Col span={12}>
                    &lt;h4 style={{ float: "right" }}>${cart.total}&lt;/h4>
                  &lt;/Col>
                &lt;/Row>
              }
              dataSource={cart.productList}
              renderItem={(item) => (
                &lt;List.Item>
                  &lt;List.Item.Meta
                    /*avatar={&lt;Avatar src="/uploads/perro_729fefb8c4.png" />}*/
                    title={item.productName}
                    description={
                      &lt;div>
                        {item.quantity} unidades a ${item.unitPrice}/unidad{" "}
                      &lt;/div>
                    }
                  />
                  &lt;div>{item.totalPrice}&lt;/div>
                &lt;/List.Item>
              )}
            />
            &lt;Divider>Promociones&lt;/Divider>
              { 
              cart.promotionList.length > 0 ? 
              &lt;List
                // footer={&lt;div>Total: ${cart.total}&lt;/div>}
                footer={
                  &lt;Row>
                    &lt;Col span={12}>&lt;h3>Total&lt;/h3>&lt;/Col>
                    &lt;Col span={12}>
                      &lt;h3 style={{ float: "right" }}>${getTotal(cart)}&lt;/h3>
                    &lt;/Col>
                  &lt;/Row>
                }
                dataSource={cart.promotionList}
                renderItem={(promotion) => (
                  &lt;List.Item>
                    &lt;List.Item.Meta
                      /*avatar={&lt;Avatar src="/uploads/perro_729fefb8c4.png" />}*/
                      title={promotion.nombre}
                      description={
                        &lt;div>
                          Valor: ${promotion.precio_promocion}
                        &lt;/div>
                      }
                    />
                    &lt;div>Descuento: ${getPromotionDiscount(promotion)}&lt;/div>
                  &lt;/List.Item>
                )}
              />
              : null
            }           
          &lt;/Col>

          &lt;Col className="gutter-row" span={5}>
            &lt;div style={style}>
              &lt;Divider>Medio de pago&lt;/Divider>
              &lt;div>
                &lt;Row>
                  &lt;Col span={12}>
                    &lt;div>
                      &lt;h3>
                        &lt;DollarCircleFilled /> Efectivo
                      &lt;/h3>
                    &lt;/div>
                  &lt;/Col>
                  &lt;Col span={12}>
                    &lt;div>
                      &lt;input
                        id="checkbox1"
                        type="checkbox"
                        className="radiocheckbox"
                        value="A"
                        onChange={() => (
                          setEfectivo(true),
                          setCredito(false),
                          setDebito(false),
                          setCart({ ...cart, payment: "efectivo" })
                        )}
                        checked={efectivo}
                      />
                    &lt;/div>
                  &lt;/Col>
                &lt;/Row>
              &lt;/div>
              &lt;div>
                &lt;Row>
                  &lt;Col span={12}>
                    &lt;div>
                      &lt;h3>
                        &lt;CreditCardFilled /> Credito
                      &lt;/h3>
                    &lt;/div>
                  &lt;/Col>
                  &lt;Col span={12}>
                    &lt;div>
                      &lt;input
                        id="checkbox2"
                        type="checkbox"
                        className="radiocheckbox"
                        value="B"
                        onChange={() => (
                          setCredito(true),
                          setEfectivo(false),
                          setDebito(false),
                          setCart({ ...cart, payment: "credito" })
                        )}
                        checked={credito}
                      />
                    &lt;/div>
                  &lt;/Col>
                &lt;/Row>
              &lt;/div>
              &lt;div>
                &lt;Row>
                  &lt;Col span={12}>
                    &lt;div>
                      &lt;h3>
                        &lt;BankFilled /> Debito
                      &lt;/h3>
                    &lt;/div>
                  &lt;/Col>
                  &lt;Col span={12}>
                    &lt;div>
                      &lt;input
                        id="checkbox3"
                        type="checkbox"
                        className="radiocheckbox"
                        value="V"
                        onChange={() => (
                          setDebito(true),
                          setCredito(false),
                          setEfectivo(false),
                          setCart({ ...cart, payment: "debito" })
                        )}
                        checked={debito}
                      />
                    &lt;/div>
                  &lt;/Col>
                &lt;/Row>
              &lt;/div>
            &lt;/div>
            &lt;Divider>Ingrese monto para calculo de vuelto&lt;/Divider>

            &lt;div
              className="btn-group-vertical ml-4 mt-4"
              role="group"
              aria-label="Basic example"
            >
              &lt;div className="btn-group">
                &lt;input
                  style={{ width: "96%", height: 50 }}
                  type="int"
                  className="text-center form-control-lg mb-1"
                  id="code"
                >&lt;/input>
              &lt;/div>
              &lt;div className="btn-group">
                &lt;button
                  type="button"
                  style={{ width: "32%", height: 50, background: "#FFF0F5" }}
                  className="btn btn-outline-secondary py-3"
                  onClick={() => {
                    document.getElementById("code").value =
                      document.getElementById("code").value + "1";
                    setsuma(suma + "1");
                  }}
                >
                  &lt;span>1&lt;/span>
                &lt;/button>
                &lt;button
                  type="button"
                  style={{ width: "32%", height: 50, background: "#FFF0F5" }}
                  className="btn btn-outline-secondary py-3"
                  onClick={() => (
                    (document.getElementById("code").value =
                      document.getElementById("code").value + "2"),
                    setsuma(suma + "2")
                  )}
                >
                  2
                &lt;/button>
                &lt;button
                  type="button"
                  style={{ width: "32%", height: 50, background: "#FFF0F5" }}
                  className="btn btn-outline-secondary py-3"
                  onClick={() => (
                    (document.getElementById("code").value =
                      document.getElementById("code").value + "3"),
                    setsuma(suma + "3")
                  )}
                >
                  3
                &lt;/button>
              &lt;/div>
              &lt;div className="btn-group">
                &lt;button
                  type="button"
                  style={{ width: "32%", height: 50, background: "#FFF0F5" }}
                  className="btn btn-outline-secondary py-3"
                  onClick={() => (
                    (document.getElementById("code").value =
                      document.getElementById("code").value + "4"),
                    setsuma(suma + "4")
                  )}
                >
                  4
                &lt;/button>
                &lt;button
                  type="button"
                  style={{ width: "32%", height: 50, background: "#FFF0F5" }}
                  className="btn btn-outline-secondary py-3"
                  onClick={() => (
                    (document.getElementById("code").value =
                      document.getElementById("code").value + "5"),
                    setsuma(suma + "5")
                  )}
                >
                  5
                &lt;/button>
                &lt;button
                  type="button"
                  style={{ width: "32%", height: 50, background: "#FFF0F5" }}
                  className="btn btn-outline-secondary py-3"
                  onClick={() => (
                    (document.getElementById("code").value =
                      document.getElementById("code").value + "6"),
                    setsuma(suma + "6")
                  )}
                >
                  6
                &lt;/button>
              &lt;/div>
              &lt;div className="btn-group">
                &lt;button
                  type="button"
                  style={{ width: "32%", height: 50, background: "#FFF0F5" }}
                  className="btn btn-outline-secondary py-3"
                  onClick={() => (
                    (document.getElementById("code").value =
                      document.getElementById("code").value + "7"),
                    setsuma(suma + "7")
                  )}
                >
                  7
                &lt;/button>
                &lt;button
                  type="button"
                  style={{ width: "32%", height: 50, background: "#FFF0F5" }}
                  className="btn btn-outline-secondary py-3"
                  onClick={() => (
                    (document.getElementById("code").value =
                      document.getElementById("code").value + "8"),
                    setsuma(suma + "8")
                  )}
                >
                  8
                &lt;/button>
                &lt;button
                  type="button"
                  style={{ width: "32%", height: 50, background: "#FFF0F5" }}
                  className="btn btn-outline-secondary py-3"
                  onClick={() => (
                    (document.getElementById("code").value =
                      document.getElementById("code").value + "9"),
                    setsuma(suma + "9")
                  )}
                >
                  9
                &lt;/button>
              &lt;/div>
              &lt;div className="btn-group">
                &lt;button
                  type="button"
                  style={{ width: "32%", height: 50, background: "#FFF0F5" }}
                  className="btn btn-outline-secondary py-3"
                  onClick={() => (
                    (document.getElementById("code").value = document
                      .getElementById("code")
                      .value.slice(0, -1)),
                    setsuma(suma.slice(0, -1))
                  )}
                >
                  &amp;lt;
                &lt;/button>
                &lt;button
                  type="button"
                  style={{ width: "32%", height: 50, background: "#FFF0F5" }}
                  className="btn btn-outline-secondary py-3"
                  onClick={() => (
                    (document.getElementById("code").value =
                      document.getElementById("code").value + "0"),
                    setsuma(suma + "0")
                  )}
                >
                  0
                &lt;/button>
                &lt;button
                  type="button"
                  style={{ width: "32%", height: 50, background: "#FFF0F5" }}
                  className="btn btn-primary py-3"
                  onClick={() => (
                    (document.getElementById("code").value = ""), setsuma("")
                  )}
                >
                  Limpiar
                &lt;/button>
              &lt;/div>
            &lt;/div>
          &lt;/Col>
          &lt;Col className="gutter-row" span={4}>
            &lt;div style={style}>
              &lt;Divider>Vuelto&lt;/Divider>
              &lt;div>Total: {cart.total}&lt;/div>
              &lt;div>Efectivo entregado: {suma}&lt;/div>
              &lt;div>Vuelto: {suma - cart.total}&lt;/div>

              &lt;Divider>Terminar&lt;/Divider>
              &lt;ConfirmSale
                meansOfPay={{ e: efectivo, c: credito, d: debito }}
                user={user}
              >&lt;/ConfirmSale>
            &lt;/div>
          &lt;/Col>
        &lt;/Row>
      &lt;/>
    &lt;/div>
  );
};

export default Payment;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#clearCart">clearCart</a></li><li><a href="global.html#ConfirmSale">ConfirmSale</a></li><li><a href="global.html#createSale">createSale</a></li><li><a href="global.html#getPromotionDiscount">getPromotionDiscount</a></li><li><a href="global.html#getTotal">getTotal</a></li><li><a href="global.html#ListCart">ListCart</a></li><li><a href="global.html#ListProducts">ListProducts</a></li><li><a href="global.html#LoginForm">LoginForm</a></li><li><a href="global.html#MenuTop">MenuTop</a></li><li><a href="global.html#newSale">newSale</a></li><li><a href="global.html#Payment">Payment</a></li><li><a href="global.html#Pos">Pos</a></li><li><a href="global.html#SearchBar">SearchBar</a></li><li><a href="global.html#SelectStore">SelectStore</a></li><li><a href="global.html#Voucher">Voucher</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.7</a> on Mon Jul 05 2021 17:43:36 GMT-0400 (Chile Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
